{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LifeUpdater = void 0;\n\nconst Utils_1 = require(\"../../Utils\");\n\nclass LifeUpdater {\n  constructor(container) {\n    this.container = container;\n  }\n\n  isEnabled(particle) {\n    return !particle.destroyed;\n  }\n\n  update(particle, delta) {\n    if (!this.isEnabled(particle)) {\n      return;\n    }\n\n    const life = particle.life;\n    let justSpawned = false;\n\n    if (particle.spawning) {\n      life.delayTime += delta.value;\n\n      if (life.delayTime >= particle.life.delay) {\n        justSpawned = true;\n        particle.spawning = false;\n        life.delayTime = 0;\n        life.time = 0;\n      } else {\n        return;\n      }\n    }\n\n    if (life.duration === -1) {\n      return;\n    }\n\n    if (particle.spawning) {\n      return;\n    }\n\n    if (justSpawned) {\n      life.time = 0;\n    } else {\n      life.time += delta.value;\n    }\n\n    if (life.time < life.duration) {\n      return;\n    }\n\n    life.time = 0;\n\n    if (particle.life.count > 0) {\n      particle.life.count--;\n    }\n\n    if (particle.life.count === 0) {\n      particle.destroy();\n      return;\n    }\n\n    const canvasSize = this.container.canvas.size,\n          widthRange = Utils_1.setRangeValue(0, canvasSize.width),\n          heightRange = Utils_1.setRangeValue(0, canvasSize.width);\n    particle.position.x = Utils_1.randomInRange(widthRange);\n    particle.position.y = Utils_1.randomInRange(heightRange);\n    particle.spawning = true;\n    life.delayTime = 0;\n    life.time = 0;\n    particle.reset();\n    const lifeOptions = particle.options.life;\n    life.delay = Utils_1.getRangeValue(lifeOptions.delay.value) * 1000;\n    life.duration = Utils_1.getRangeValue(lifeOptions.duration.value) * 1000;\n  }\n\n}\n\nexports.LifeUpdater = LifeUpdater;","map":null,"metadata":{},"sourceType":"script"}